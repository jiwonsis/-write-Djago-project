# 파이썬 Django 학습
> 해당 소스는 무단 도용 배포 해도됩니다.
> 쉘 스크립트가 실행이 안될 경우 chmod 0700 [파일] 로 권한을 변경하시길 바랍니다.

### chapter.5 Blog 어플리케이션 기능 추가 (3차)
##### 1) 이전 정리
> Blog 어플리케이션 이전까지의 기능스팩 
> 
> - 리스트 뷰 (페이징 처리) 
> 
> - 디테일 뷰 
> 
> ** 이것은 가장 기본적인 기능이며, 해당 챕터부터는 다양한 기능들을 추가함.**
##### 2) 공유 E-mail 보내기 기능
> **알림**
> 
> 왠만하면 상용서버에 쓰지마세요! 
> 
> 해당 기능은 보안에 취약한 e-mail보내기 방식이므로, 상용에서는 이메일 서버와의 보안 인터페이스를 구현 및 연동하여 사용하시길 바랍니다) 
> 
> Django에서는 메일 보내기 기능이 내장되어있지만 2010년에 stmp 개정이 된 rfc5321 방식으로는 사용할 수가 없어 따로 미들웨어를 만드시거나, 또는 사용하시길 권장합니다.
> 
> 참조 : https://djangopackages.org/grids/g/email/ [rfc5321이 포함된 메일 미들웨어]
##### 3) CSRF 차단 기능
> 해당 학습 프로젝트에서는 폼 데이터 전송시로 구현하였으며, AJAX통신간에도 사용할 수 있습니다.
> 
> csrf 란? Cross-site request forgery의 줄임말로 서버와 사용자간에 중간에 통신 패킷을 가로채, 사용자의 민감한 정보를 볼수가 있습니다. 해당 해킹공격은 서로간에 약속된 양방향간에 암호화로 중간자가 볼수 없게 조치해야합니다.
> 보안 수준 : 기본(필수)
> 
> 참조 : https://namu.wiki/w/CSRF [CSRF관련 정의와 대책방안]
> 
> 참조 : https://docs.djangoproject.com/en/1.11/ref/csrf/ [Django CSRF 리퍼런스]
##### 4) 댓글 기능 DB 추가 및 어드민 연동
> 해당 기능을 구현하기 위해서는 DB에 테이블(blog_comment)을 추가함.
> 
> DB구조의 특이사항으로는 blog_post 테이블에 id를 참조하는 외래키로 설명하며, 외래키이면서, 동시에 blog_comment에 고유키로 설정함.
> 
> DB migration이 끝나면, admin에 해당 필드를 등록함
###### 5) 댓글 기능 화면 연동
> 위에서 메일 기능에서 사용한 폼처럼 해당 댓글 또한 폼으로 만든다.
> 
> 다만 메일 폼과는 다르게 모델기반 클래스로 폼을 만드는 부분으로 개발한다.
> blog/views.py -> post_detail 함수에 폼연동을 한다.
>
> detail.html -> 코멘트 부분을 연동한다.
> 
> **테스트**
> 
> 관리자에서 active 체크 박스를 꺼버리면, 해당 코멘트는 노출되지 않아야 한다.
